{"componentChunkName":"component---src-components-posts-post-template-index-js","path":"/2020/[js]-scope/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"JavaScript 作用域、闭包详解\",\n  \"date\": \"2021-04-14T00:00:00.000Z\",\n  \"tags\": [\"JavaScript\"],\n  \"excerpt\": \"Scope, Closure, this, call, apply\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Info = makeShortcode(\"Info\");\nvar Primary = makeShortcode(\"Primary\");\nvar Warning = makeShortcode(\"Warning\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Info, {\n    mdxType: \"Info\"\n  }, mdx(\"p\", null, \"JS \\u5C5E\\u4E8E\\u9759\\u6001\\u8BCD\\u6CD5\\u4F5C\\u7528\\u57DF\\uFF0C\\u6B63\\u662F\\u7531\\u4E8E\\u8FD9\\u4E2A\\u539F\\u56E0\\uFF0C\\u5BFC\\u81F4 JS \\u4E2D\\u7684\\u53D8\\u91CF\\u548C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"this\"), \" \\u6307\\u5411\\u53D8\\u5F97\\u5F88\\u5947\\u602A\\uFF0C\\u6240\\u4EE5\\u672C\\u6587\\u5C31\\u8BE5\\u95EE\\u9898\\u8FDB\\u884C\\u4E86\\u8BE6\\u7EC6\\u5C55\\u5F00\\uFF0C\\u8BA9\\u6211\\u4EEC\\u5F7B\\u5E95\\u628A\\u8FD9\\u4E2A\\u95EE\\u9898\\u5F04\\u61C2\\uFF0C\\u56E0\\u4E3A\\u2026\\u2026\\u8FD9\\u4E5F\\u662F\\u9762\\u8BD5\\u9AD8\\u9891\\u8003\\u70B9\\u4E4B\\u4E00 XD\")), mdx(Primary, {\n    title: \"call\\u3001apply\\u3001bind\",\n    mdxType: \"Primary\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"call\")), mdx(\"p\", null, \"\\u4E00\\u53E5\\u8BDD\\u4ECB\\u7ECD call\\uFF1A\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"call \\u5C31\\u662F\\u6307\\u5B9A\\u4E00\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"this\"), \" \\u5BF9\\u8C61\\u4EE5\\u53CA\\u63D0\\u4F9B\\u4E00\\u7CFB\\u5217\\u53C2\\u6570\\u6765\\u8C03\\u7528\\u51FD\\u6570\\u4E3B\\u4F53\")), mdx(\"p\", null, \"\\u4F8B\\u5982:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"var foo = {\\n  value: 1,\\n}\\n\\nfunction bar() {\\n  console.log(this.value)\\n}\\n\\nbar.call(foo) // 1\\n\")), mdx(\"p\", null, \"\\u6CE8\\u610F\\u4E24\\u70B9\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"call \\u6539\\u53D8\\u4E86 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"this\"), \" \\u7684\\u6307\\u5411\\uFF0C\\u6307\\u5411\\u5230 foo\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"bar \\u51FD\\u6570\\u6267\\u884C\\u4E86\")), mdx(\"p\", null, \"\\u6A21\\u62DF\\u5B9E\\u73B0 call\\uFF0C\\u8981\\u70B9\\u5982\\u4E0B\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5C06\\u51FD\\u6570 bind \\u5230\\u6307\\u5B9A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"this\"), \" \\u5BF9\\u8C61\\u4E2D\\uFF0C\\u4ECE\\u800C\\u83B7\\u5F97\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\uFF0C\\u6267\\u884C\\u5B8C\\u6210\\u540E\\u518D\\u5220\\u9664\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u4E3A\\u4E86\\u6A21\\u62DF ES3 \\u4E2D\\u5B9E\\u73B0\\u4E0D\\u5B9A\\u957F\\u4F20\\u53C2\\uFF0C\\u8981\\u7ED3\\u5408 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"arguments\"), \" \\u5B57\\u7B26\\u4E32\\u6570\\u7EC4\\u548C \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"eval\"), \" \\u6765\\u5B9E\\u73B0\\uFF0C\\u5426\\u5219\\u7528 ES6 \\u7684\\u5269\\u4F59\\u64CD\\u4F5C\\u7B26\\uFF08...\\uFF09\\u5373\\u53EF\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"this\"), \" \\u53C2\\u6570\\u53EF\\u4EE5\\u4F20 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"null\"), \"\\uFF0C\\u8FD9\\u65F6 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"this\"), \" \\u6307\\u5411\\u5168\\u5C40\\u4F5C\\u7528\\u57DF\\uFF08window \\u6216 globalThis\\uFF09\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"Function.prototype.myCall = function (context) {\\n  var context = context || window || globalThis\\n  context.fn = this\\n  var args = []\\n  for (let i = 1, len = arguments.length; i < len; i++) {\\n    args.push(\\\"arguments[\\\" + i + \\\"]\\\")\\n  }\\n\\n  eval(\\\"context.fn(\\\" + args + \\\")\\\")\\n  delete context.fn\\n}\\n\\nvar value = 1\\nvar foo = {\\n  value: 2,\\n}\\n\\nfunction bar(name, age) {\\n  console.log(name)\\n  console.log(age)\\n  console.log(this.value)\\n}\\n\\nbar.myCall(foo, \\\"pfan\\\", 28)\\n// pfan\\n// 28\\n// 2\\nbar.myCall(null, \\\"pfan\\\", 28)\\n// pfan\\n// 28\\n// 1\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"apply\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apply\"), \" \\u548C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"call\"), \" \\u5F88\\u50CF\\uFF0C\\u552F\\u4E00\\u7684\\u533A\\u522B\\u5C31\\u662F\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apply\"), \" \\u53EA\\u6709 2 \\u4E2A\\u53C2\\u6570\\uFF0C\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\u662F\\u51FD\\u6570\\u5F62\\u53C2\\u6570\\u7EC4\\uFF0C\\u800C\\u975E \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"call\"), \" \\u91CC\\u9762\\u5C55\\u5F00\\u6210\\u591A\\u4E2A\\u53C2\\u6570\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"Function.prototype.apply = function (context, arr) {\\n  var context = Object(context) || window\\n  context.fn = this\\n\\n  var result\\n  if (!arr) {\\n    result = context.fn()\\n  } else {\\n    var args = []\\n    for (var i = 0, len = arr.length; i < len; i++) {\\n      args.push(\\\"arr[\\\" + i + \\\"]\\\")\\n    }\\n    result = eval(\\\"context.fn(\\\" + args + \\\")\\\")\\n  }\\n\\n  delete context.fn\\n  return result\\n}\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"bind\")), mdx(\"p\", null, \"\\u4E00\\u53E5\\u8BDD\\u4ECB\\u7ECD bind:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"bind() \\u65B9\\u6CD5\\u4F1A\\u521B\\u5EFA\\u4E00\\u4E2A\\u65B0\\u51FD\\u6570\\u3002\\u5F53\\u8FD9\\u4E2A\\u65B0\\u51FD\\u6570\\u88AB\\u8C03\\u7528\\u65F6\\uFF0Cbind() \\u7684\\u7B2C\\u4E00\\u4E2A\\u53C2\\u6570\\u5C06\\u4F5C\\u4E3A\\u5B83\\u8FD0\\u884C\\u65F6\\u7684 this\\uFF0C\\u4E4B\\u540E\\u7684\\u4E00\\u5E8F\\u5217\\u53C2\\u6570\\u5C06\\u4F1A\\u5728\\u4F20\\u9012\\u7684\\u5B9E\\u53C2\\u524D\\u4F20\\u5165\\u4F5C\\u4E3A\\u5B83\\u7684\\u53C2\\u6570\\u3002(\\u6765\\u81EA\\u4E8E MDN )\")), mdx(\"p\", null, \"\\u7531\\u6B64\\u6211\\u4EEC\\u53EF\\u4EE5\\u9996\\u5148\\u5F97\\u51FA bind \\u51FD\\u6570\\u7684\\u4E24\\u4E2A\\u7279\\u70B9\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u8FD4\\u56DE\\u4E00\\u4E2A\\u51FD\\u6570\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u53EF\\u4EE5\\u4F20\\u5165\\u53C2\\u6570\\n3\", \"*\", \"\\uFF08\\u6CA1\\u6709\\u663E\\u793A\\u63D0\\u51FA\\uFF0C\\u4F46\\u662F\\u5C5E\\u4E8E bind \\u7279\\u6027\\uFF09. \\u4E00\\u4E2A\\u7ED1\\u5B9A\\u51FD\\u6570\\u4E5F\\u80FD\\u4F7F\\u7528 new \\u64CD\\u4F5C\\u7B26\\u521B\\u5EFA\\u5BF9\\u8C61\\uFF1A\\u8FD9\\u79CD\\u884C\\u4E3A\\u5C31\\u50CF\\u628A\\u539F\\u51FD\\u6570\\u5F53\\u6210\\u6784\\u9020\\u5668\\u3002\\u63D0\\u4F9B\\u7684 this \\u503C\\u88AB\\u5FFD\\u7565\\uFF0C\\u540C\\u65F6\\u8C03\\u7528\\u65F6\\u7684\\u53C2\\u6570\\u88AB\\u63D0\\u4F9B\\u7ED9\\u6A21\\u62DF\\u51FD\\u6570\\u3002\")), mdx(\"p\", null, \"\\u5B9E\\u73B0\\u5982\\u4E0B\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"Function.prototype.myBind = function (context) {\\n  var self = this // this \\u662F\\u51FD\\u6570\\u8C03\\u7528\\u8005\\uFF0C\\u4E0D\\u7528 self \\u7684\\u8BDD\\uFF0C\\u5F53 this \\u662F window \\u7684\\u65F6\\u5019\\uFF0C\\u4F1A\\u5BFC\\u81F4 this.apply \\u4E0D\\u751F\\u6548\\n  args = Array.prototype.slice.call(arguments, 1)\\n\\n  var fBound = function () {\\n    var callArgs = Array.prototype.slice.call(arguments)\\n    // \\u5F53\\u4F5C\\u4E3A\\u6784\\u9020\\u51FD\\u6570\\u65F6\\uFF0Cthis \\u6307\\u5411\\u5B9E\\u4F8B\\uFF0C\\u6B64\\u65F6\\u7ED3\\u679C\\u4E3A true\\uFF0C\\u5C06\\u7ED1\\u5B9A\\u51FD\\u6570\\u7684 this \\u6307\\u5411\\u8BE5\\u5B9E\\u4F8B\\uFF0C\\u53EF\\u4EE5\\u8BA9\\u5B9E\\u4F8B\\u83B7\\u5F97\\u6765\\u81EA\\u7ED1\\u5B9A\\u51FD\\u6570\\u7684\\u503C\\n    // \\u4EE5\\u4E0A\\u9762\\u7684\\u662F demo \\u4E3A\\u4F8B\\uFF0C\\u5982\\u679C\\u6539\\u6210 `this instanceof fBound ? null : context`\\uFF0C\\u5B9E\\u4F8B\\u53EA\\u662F\\u4E00\\u4E2A\\u7A7A\\u5BF9\\u8C61\\uFF0C\\u5C06 null \\u6539\\u6210 this \\uFF0C\\u5B9E\\u4F8B\\u4F1A\\u5177\\u6709 habit \\u5C5E\\u6027\\n    // \\u5F53\\u4F5C\\u4E3A\\u666E\\u901A\\u51FD\\u6570\\u65F6\\uFF0Cthis \\u6307\\u5411 window\\uFF0C\\u6B64\\u65F6\\u7ED3\\u679C\\u4E3A false\\uFF0C\\u5C06\\u7ED1\\u5B9A\\u51FD\\u6570\\u7684 this \\u6307\\u5411 context\\n    return this.apply(\\n      this instanceof fBound ? this : context,\\n      args.concat(callArgs)\\n    )\\n  }\\n  // \\u4FEE\\u6539\\u8FD4\\u56DE\\u51FD\\u6570\\u7684 prototype \\u4E3A\\u7ED1\\u5B9A\\u51FD\\u6570\\u7684 prototype\\uFF0C\\u5B9E\\u4F8B\\u5C31\\u53EF\\u4EE5\\u7EE7\\u627F\\u7ED1\\u5B9A\\u51FD\\u6570\\u7684\\u539F\\u578B\\u4E2D\\u7684\\u503C\\n  fBound.prototype = this.prototype\\n  return fBound\\n}\\n\")), mdx(\"p\", null, \"\\u4F46\\u662F\\u5728\\u8FD9\\u4E2A\\u5199\\u6CD5\\u4E2D\\uFF0C\\u6211\\u4EEC\\u76F4\\u63A5\\u5C06 fBound.prototype = this.prototype\\uFF0C\\u6211\\u4EEC\\u76F4\\u63A5\\u4FEE\\u6539 fBound.prototype \\u7684\\u65F6\\u5019\\uFF0C\\u4E5F\\u4F1A\\u76F4\\u63A5\\u4FEE\\u6539\\u7ED1\\u5B9A\\u51FD\\u6570\\u7684 prototype\\u3002\\u8FD9\\u4E2A\\u65F6\\u5019\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7\\u4E00\\u4E2A\\u7A7A\\u51FD\\u6570\\u6765\\u8FDB\\u884C\\u4E2D\\u8F6C\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"Function.prototype.bind2 = function (context) {\\n  var self = this\\n  var args = Array.prototype.slice.call(arguments, 1)\\n\\n  var fNOP = function () {}\\n\\n  var fBound = function () {\\n    var bindArgs = Array.prototype.slice.call(arguments)\\n    return self.apply(\\n      this instanceof fNOP ? this : context,\\n      args.concat(bindArgs)\\n    )\\n  }\\n\\n  fNOP.prototype = this.prototype\\n  fBound.prototype = new fNOP()\\n  return fBound\\n}\\n\")), mdx(\"p\", null, \"\\u63A5\\u4E0B\\u6765\\u5904\\u7406\\u4E9B\\u5C0F\\u95EE\\u9898:\"), mdx(\"p\", null, \"1.\\u8C03\\u7528 bind \\u7684\\u4E0D\\u662F\\u51FD\\u6570\\u548B\\u529E\\uFF1F\"), mdx(\"p\", null, \"\\u4E0D\\u884C\\uFF0C\\u6211\\u4EEC\\u8981\\u62A5\\u9519\\uFF01\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"if (typeof this !== \\\"function\\\") {\\n  throw new Error(\\n    \\\"Function.prototype.bind - what is trying to be bound is not callable\\\"\\n  )\\n}\\n\")), mdx(\"p\", null, \"2.\\u6211\\u8981\\u5728\\u7EBF\\u4E0A\\u7528\"), mdx(\"p\", null, \"\\u90A3\\u522B\\u5FD8\\u4E86\\u505A\\u4E2A\\u517C\\u5BB9\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"Function.prototype.bind = Function.prototype.bind || function () {\\n    \\u2026\\u2026\\n};\\n\")), mdx(\"p\", null, \"\\u5F53\\u7136\\u6700\\u597D\\u662F\\u7528 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/es-shims/es5-shim\"\n  }, \"es5-shim\"), \" \\u5566\\u3002\")), mdx(Warning, {\n    title: \"\\u53C2\\u8003\\u8FDE\\u63A5\",\n    mdxType: \"Warning\"\n  }, mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/mqyqingfeng/Blog\"\n  }, \"JavaScript \\u6DF1\\u5165\\u7CFB\\u5217\")))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Scope, Closure, this, call, apply","fields":{"slug":"/2020/[js]-scope/"},"frontmatter":{"title":"JavaScript 作用域、闭包详解","date":"04/14/2021","tags":["JavaScript"]}}},"pageContext":{"slug":"/2020/[js]-scope/","next":{"fields":{"slug":"/2020/[node]-garbage-collection/"},"frontmatter":{"title":"V8 GC 垃圾回收","tags":["Node","V8"],"date":"2021-04-15T00:00:00.000Z","excerpt":"Node, V8, GC, 垃圾回收","draft":null}},"prev":{"fields":{"slug":"/2020/[software]-design-pattern/"},"frontmatter":{"title":"设计模式一文总结","tags":["Software-Design Pattern"],"date":"2021-04-12T00:00:00.000Z","excerpt":"工场模式、抽象工场、生成器、原型、观察者……","draft":null}}}},"staticQueryHashes":["1703067421","3649515864","63159454"]}